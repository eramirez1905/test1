raw_layer_backfill:
  countries: ~         # List of countries to filter the import.
                       # Empty array means all countries.
                       # Null value disable the import for not regional applications.
  regions: ~           # List of regions to filter the import.
                       # Empty array means all regions.
                       # Null value disable the import for regional applications.
  from_date: ~         # Datetime format: %Y-%m-%d %H:%M:%S
  to_date: ~           # Datetime format: %Y-%m-%d %H:%M:%S

dwh_merge_layer_databases:
  il:
    is_regional: true
    source: RedShift_S3
    source_format: parquet
    redshift_s3:
      # Pandora DWH do not have a staging environment
      bucket_name: dh-pandora-bi-datahub
    tables:
      - name: city
        pk_columns: [rdbms_id, city_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_city

      - name: cuisines
        pk_columns: [rdbms_id, cuisine_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_cuisines

      - name: customer
        pk_columns: [rdbms_id, customer_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_customer

      - name: customeraddress
        pk_columns: [rdbms_id, delivery_address_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_customeraddress

      - name: decline_reasons
        pk_columns: [rdbms_id, declinereason_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_decline_reasons

      - name: deliveryprovider
        pk_columns: [rdbms_id, deliveryprovider_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_deliveryprovider

      - name: first_order_uuid
        pk_columns: [rdbms_id, new_customer_uuid]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_first_order_uuid

      - name: languages
        pk_columns: [rdbms_id, language_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_languages

      - name: ops
        pk_columns: [rdbms_id, order_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_ops

      - name: option_value
        pk_columns: [rdbms_id, option_id, vat_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_option_value

      - name: paymenttype
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_paymenttype

      - name: social_login
        pk_columns: [rdbms_id, social_login_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_social_login

      - name: topping_templates
        pk_columns: [rdbms_id, product_variation_id, productvariationtoppingtemplate_id, toppingtemplate_id, topping_template_product_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_topping_templates

      - name: translations
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_translations

      - name: users
        pk_columns: [rdbms_id, user_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_users

      - name: vendor_content
        pk_columns: [rdbms_id, vendor_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendor_content

      - name: vendor_discounts
        pk_columns: [rdbms_id, vendor_discount_id, discount_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendor_discounts

      - name: vendor_foodcharacteristics
        pk_columns: [rdbms_id, vendor_id, foodcaracteristics_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendor_foodcharacteristics

      - name: vendor_products
        pk_columns: [rdbms_id, vendor_id, product_id, product_variation_id, menu_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendor_products

      - name: vendorflows
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendorflows

      - name: vendors
        pk_columns: [rdbms_id, vendor_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendors

      - name: vendors_vouchers
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendors_vouchers

      - name: vendorscuisines
        pk_columns: [rdbms_id, vendor_id, cuisine_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vendorscuisines

      - name: vouchers
        pk_columns: [rdbms_id, voucher_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_vouchers

      - name: accounting
        pk_columns: [rdbms_id, order_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_accounting

      - name: basket_update
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_basket_update

      - name: basket_update_product
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_basket_update_product

      - name: basket_update_product_topping
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_basket_update_product_topping

      - name: order_commissions
        pk_columns: [rdbms_id, order_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_order_commissions

      - name: order_payments
        pk_columns: [rdbms_id, order_payment_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_order_payments

      - name: order_toppings
        pk_columns: [rdbms_id, ordertopping_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_order_toppings

      - name: orderproducts
        pk_columns: [rdbms_id, orderproduct_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_orderproducts

      - name: orders
        pk_columns: [rdbms_id, order_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_orders

      - name: vendor_schedules
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_vendor_schedules

      - name: vendor_schedules_special
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_vendor_schedules_special

      - name: discounts
        pk_columns: [rdbms_id, discount_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_dim_discounts

      - name: customers_uuid
        pk_columns: [rdbms_id, customer_id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_fct_customers_uuid

      - name: sb_order
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_sb_fct_order

      - name: sb_subscription
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_sb_fct_subscription

      - name: sb_subscription_payment
        pk_columns: [rdbms_id, id]
        cleanup_enabled: false
        partition_by_date: false
        filter_import_by_date: false
        sanity_checks:
          created_date_null: false
          duplicate_check: true
        write_disposition: WRITE_APPEND
        redshift_s3:
          table_name: il_region_sb_fct_subscription_payment
